%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Report
% LaTeX Template
% Version 1.0 (December 8 2014)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% Brandon Fryslie
% With extensive modifications by:
% Vel (vel@latextemplates.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[usletter, 12pt]{article}
\input{structure.tex} % Input the structure.tex file which specifies the document layout and style

\newcommand{\project}{Homework 2: Song Composer}
\newcommand{\Sabbir}{Sabbir Ahmed}

\begin{document}

    \begin{titlepage}

        \vspace*{\fill} % Add whitespace above to center the title page content
        \begin{center}

            {\LARGE \project~Report Draft}\\ [1.5cm]

            Submitted: \today
            
            \vspace*{\fill}

            \Sabbir

        \end{center}
        \vspace*{\fill} % Add whitespace below to center the title page content

    \end{titlepage}

    \section{Description}

    This project utilizes the AVR Butterfly through the terminal to allow a user to create up to 4 songs at a time, along with a title and author, and play them back. \\

    \noindent This document serves as the final report for the project. The report details the implementation of the project using C and specific AVR libraries to handle memory allocation and user interface with the AVR system. The usage of the program along with its constraints are included as well.

    \section{Implementation}

    The project was implemented using C and the \codeword{AVR/io.h}, \codeword{AVR/pgmspace.h} and \codeword{util/delay.h} libraries included in the avr-gcc project. \codeword{U0_UART} was included with the project prompt to interface 

        \subsection{Converting User Inputs to Notes}

        Notes comprise of an ASCII character, (A-G, and R) and a duration of the note (0-31). They are converted from user inputted strings to \codeword{uint8_t} by left-shifting the integer value mapped to the ASCII character by 5 bits and adding the duration. \\
        Unpacking the notes is possible by right-shifting by 5 bits to retrieve the ASCII character or by bitwise and-ing with 0x1F (0001 1111) to retrieve the duration.

    \section{Code}

        The C scripts used for the implementation has been attached alongside the report.

        \subsection{main.c}
        Driver file for Homework 2: Song Composer. This script contains the declarations and implementations of the menu functions and other functions to handle user inputs and outputs.

        \subsection{music.h}
        Contains the declarations for the functions in music.c and main.c

        \subsection{music.c}
        Contains the implementation of all the functionalities related to parsing user inputted song notes, packing and unpacking song notes, and utilizing the ports of the AVR to produce the notes via its speaker.

\end{document}
