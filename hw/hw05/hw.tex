%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Template LaTeX Template Version 1.0 (December 8 2014)
%
% This template has been downloaded from: http://www.LaTeXTemplates.com
%
% Original author: Brandon Fryslie With extensive modifications by: Vel
% (vel@latextemplates.com)
%
% License: CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
% Authors: Sabbir Ahmed
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[10pt]{extarticle}
\input{../structure.tex} % specifies the document layout and style

% document info command
\newcommand{\documentinfo}[5]{
    \begin{centering}
        \parbox{2in}{
        \begin{spacing}{1}
            \begin{flushleft}
                \begin{tabular}{l l} \textbf{#1} \\ \textbf{#2} \\ #3 \\
                \end{tabular}\\
                \rule{\textwidth}{1pt}
            \end{flushleft}
        \end{spacing} }
    \end{centering} }

\begin{document}

    \documentinfo{Sabbir Ahmed}
    {CMSC 411 - HW 05}
    {\textbf{DATE:} \today}
    \vspace{-0.3in}

    \begin{enumerate}

        \item The table below lists parameters for different direct-mapped cache designs.

        \begin{table}[h]
            \centering
            \begin{tabular*}{200pt}{@{\extracolsep{\fill}} ccc}
                    & \textbf{Cache Data Size}  & \textbf{Cache Block Size} \\
                \hline
                i)  & 64 kB                     & 1 word                    \\
                ii) & 64 kB                     & 2 words                   \\
            \end{tabular*}
        \end{table}

        \begin{enumerate}

            \item \textbf{Question} Calculate the total number of bits required
            for the cache listed in the table, assuming a 32-bit address.

            \textbf{Answer} \\
            Using: 
                \[ 2^{\text{n}} \times (\text{valid field size} + \text{tag
                size} + \text{block size}) \]
            where
            \begin{equation*}
                \begin{split}
                    \text{tag size} & = 32 - (n + m + 2) \\
                    n & = log_2(\text{cache data size}) \\
                    m & = log_2(\text{block size}) \\
                    \text{valid bits} & = 1 \\
                \end{split}
            \end{equation*}

            For design i) total number of bits required:
            \begin{equation*}
                \begin{split}
                    n & = log_2(\text{64 kB}) \\
                    & = 16 \\
                    m & = log_2(\text{2}) \\
                    & = 1 \\
                    \text{tag size} & = 32 - (16 + 1 + 2) \\
                    & = 13 \\
                    \text{valid bits} & = 1 \\
                    \text{total bits} & = 2^{16} \times (1 + 13 + 2) \\
                    & = 2^{20} \ \text{bits} \\
                \end{split}
            \end{equation*}

            \item \textbf{Question} What is the total number of bits if the
            cache is organized as a 4-way associative with one word blocks?

            \textbf{Answer}

        \end{enumerate}

            \item For a pipeline with a perfect CPI = 1 if no memory-access
            related stall, consider the following program and cache behaviors.

            \begin{table}[h]
                \centering
                \begin{tabular}{p{2cm}p{2cm}p{2cm}p{2cm}p{1.5cm}}
                    \textbf{Data Reads Per 1000 Instructions} & \textbf{Data
                    Writes Per 1000 Instructions} & \textbf{Instruction Cache
                    Miss Rate} & \textbf{Data Cache Miss Rate} & \textbf{Block
                    Size (Byte)} \\
                    \hline
                    200 & 160 & 0.20\% & 2\% & 8 \\
                \end{tabular}
            \end{table}

        \begin{enumerate}

            \item \textbf{Question} For a write-through, write-allocate cache
            with sufficiently large write buffer (i.e., no buffer caused
            stalls), what’s the minimum read and write bandwidths (measured by
            byte-per- cycle) needed to achieve a CPI of 2?

            \textbf{Answer} 

            \item \textbf{Question} For a write-back, write-allocate cache,
            assuming 30\% of replaced data cache blocks are dirty, what’s the
            minimal read and write bandwidths needed for a CPI of 2?

            \textbf{Answer}

        \end{enumerate}

        \item Using the sequences of 32-bit memory read references, given as
        word addresses in the following table:

        \begin{table}[h]
            \centering
            \begin{tabular*}{300pt}{@{\extracolsep{\fill}}
            |c|c|c|c|c|c|c|c|c|c|c|c|}
            \hline
            6 & 214 & 175 & 214 & 6 & 84 & 65 & 174 & 64 & 105 & 85 & 215 \\
            \hline
            \end{tabular*}
        \end{table}
        \newpage

        For each of these read accesses, identify the binary address, the tag,
        the index, and whether it experiences a hit or a miss, for each of the
        following cache configurations. Assume the cache is initially empty.

        \begin{enumerate}

            \item \textbf{Question} A direct-mapped cache with 16 one-word
            blocks.

            \textbf{Answer}

            Since the block size is 1 word, $log_{2}(1)=0$ offset bits are
            required.
            \begin{table}[h]
                \centering
                \caption{A Direct-mapped Cache With 16 One-word Blocks}
                \begin{tabular*}{300pt}{@{\extracolsep{\fill}} ccccc}
                    \textbf{Memory} & \textbf{Binary} & \textbf{Tag} &
                    \textbf{Index} & \textbf{Hit / Miss} \\
                    \hline
                    6   & 00000110  & 0000  & 0110  & miss  \\
                    214 & 11010110  & 1101  & 0110  & miss  \\
                    175 & 10101111  & 1010  & 1111  & miss  \\
                    214 & 11010110  & 1101  & 0110  & hit   \\
                    6   & 00000110  & 0000  & 0110  & miss  \\
                    84  & 01010100  & 0101  & 0100  & miss  \\
                    65  & 01000001  & 0100  & 0001  & miss  \\
                    174 & 10101110  & 1010  & 1110  & miss  \\
                    64  & 01000000  & 0100  & 0000  & miss  \\
                    105 & 01101001  & 0110  & 1001  & miss  \\
                    85  & 01010101  & 0101  & 0101  & miss  \\
                    215 & 11010111  & 1101  & 0111  & miss  \\
                \end{tabular*}
            \end{table}
            \newpage

            \item \textbf{Question} A direct-mapped cache with two-word blocks
            and a total size of eight blocks.

            \textbf{Answer}
            Since the block size is 2 words, $log_{2}(2)=1$ offset bits are
            required.
            \begin{table}[h]
                \centering
                \caption{A Direct-mapped Cache With Two-word Blocks And A Total
                Size Of Eight Blocks}
                \begin{tabular*}{300pt}{@{\extracolsep{\fill}} ccccc}
                    \textbf{Memory} & \textbf{Binary} & \textbf{Tag} &
                    \textbf{Index} & \textbf{Hit / Miss} \\
                    \hline
                    6   & 00000110  & 0000  & 011   & miss  \\
                    214 & 11010110  & 1101  & 011   & miss  \\
                    175 & 10101111  & 1010  & 111   & miss  \\
                    214 & 11010110  & 1101  & 011   & hit   \\
                    6   & 00000110  & 0000  & 011   & miss  \\
                    84  & 01010100  & 0101  & 010   & miss  \\
                    65  & 01000001  & 0100  & 000   & miss  \\
                    174 & 10101110  & 1010  & 111   & miss  \\
                    64  & 01000000  & 0100  & 000   & miss  \\
                    105 & 01101001  & 0110  & 100   & miss  \\
                    85  & 01010101  & 0101  & 010   & miss  \\
                    215 & 11010111  & 1101  & 011   & miss  \\
                \end{tabular*}
            \end{table}
            \newpage

            \item \textbf{Question} A fully associative cache with two-word
            blocks and a total size of eight words. Use LRU replacement.

            \textbf{Answer}
            \begin{table}[h]
                \centering
                \caption{A Fully Associative Cache With Two-word Blocks And A
                Total Size Of Eight Words With LRU Replacement}
                \begin{tabular*}{300pt}{@{\extracolsep{\fill}} ccccc}
                    \textbf{Memory} & \textbf{Binary} & \textbf{Tag} &
                    \textbf{Index} & \textbf{Hit / Miss} \\
                    \hline
                    6   & 00000110 & & & miss   \\
                    214 & 11010110 & & & miss   \\
                    175 & 10101111 & & & miss   \\
                    214 & 11010110 & & & hit    \\
                    6   & 00000110 & & & hit    \\
                    84  & 01010100 & & & miss   \\
                    65  & 01000001 & & & miss   \\
                    174 & 10101110 & & & hit    \\
                    64  & 01000000 & & & hit    \\
                    105 & 01101001 & & & miss   \\
                    85  & 01010101 & & & hit    \\
                    215 & 11010111 & & & hit    \\
                \end{tabular*}
            \end{table}
            \newpage

            \item \textbf{Question} A 2-way set associative cache with one-word
            block size and total size of 8 words, while applying LRU
            replacement policy.

            \textbf{Answer}
            \begin{table}[h]
                \centering
                \caption{A 2-way Set Associative Cache With One-word Block Size
                And Total Size Of 8 Words With LRU Replacement Policy}
                \begin{tabular*}{300pt}{@{\extracolsep{\fill}} ccccc}
                    \textbf{Memory} & \textbf{Binary} & \textbf{Tag} &
                    \textbf{Index} & \textbf{Hit / Miss} \\
                    \hline
                    6   & 00000110 & & & miss   \\
                    214 & 11010110 & & & miss   \\
                    175 & 10101111 & & & miss   \\
                    214 & 11010110 & & & hit    \\
                    6   & 00000110 & & & hit    \\
                    84  & 01010100 & & & miss   \\
                    65  & 01000001 & & & miss   \\
                    174 & 10101110 & & & hit    \\
                    64  & 01000000 & & & hit    \\
                    105 & 01101001 & & & miss   \\
                    85  & 01010101 & & & hit    \\
                    215 & 11010111 & & & hit    \\
                \end{tabular*}
            \end{table}
            \newpage

        \end{enumerate}

    \end{enumerate}

\end{document}
