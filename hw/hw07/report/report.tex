%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Template LaTeX Template Version 1.0 (December 8 2014)
%
% This template has been downloaded from: http://www.LaTeXTemplates.com
%
% Original author: Brandon Fryslie With extensive modifications by: Vel
% (vel@latextemplates.com)
%
% License: CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
% Authors: Sabbir Ahmed
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[paper=usletter, fontsize=12pt]{article}
\input{../../structure.tex} % specifies the document layout and style

\usepackage{array}
\usepackage[font=small, labelfont=bf]{caption}
\captionsetup[table]{skip=10pt}
\renewcommand{\arraystretch}{1.2}

\begin{document}

    \documentinfo {\textbf{Homework 7: VGA Circle Report}}
    {\today} {Sabbir Ahmed}
    \vspace{-0.1in}

    \section{Background} In this project students will explicitly implement a
    computational finite-state machine, utilize rescheduling and resource
    sharing, and become familiar with the concept of using an on-chip clock
    multiplier. Students will leverage the faster clock to implement
    computations in a serial fashion. In this project, students will display a
    circle on the screen, examine analysis reports, and modify synthesis
    options.

    \section{Implementation} Multiple designs were implemented to analyze their
    effects on resource sharing and timing constraints.

        \subsection{Single Cycle Computation Design} The initial design
        implemented the entire inequality in a single cycle. Since the design
        emphasized on the computation being performed in a single cycle,
        explicitly generating several registers to hold the constant state
        value was unnecessary. An additional state was included for the
        synthesizer to consider encoding the FSM. The single-state module
        successfully generated the circle on the VGA screen using the formula
        $(x - x_c)^2 + (y - y_c)^2 < 10000$. The module is initialized with an
        asynchronous reset.

        \subsubsection{Testbench} Figure \ref{fig:singwav} provides the
        waveforms generated by sample coordinates $(x, y)$ to the module.
        \begin{figure}[ht]
            \begin{center}
                \includegraphics[width=1\textwidth]{singwav.png}
                \caption{Single cycle computation design demonstrating the
                circle flag (\texttt{in\_circle}) activated at $(360, 240)$ and
                deactivated at $(10,10)$.}
                \label{fig:singwav}
            \end{center}
        \end{figure}
        \newpage

        \subsubsection{Synthesis} As expected, the design did not meet the
        timing constraints. Figure \ref{fig:singtime} provides the summary of
        the time constraints report, where the constraint
        \texttt{TS\_uut\_CLK0\_BUF} was not met. Table \ref{table:singslacks} lists its timing slacks:
        \begin{table}[h]
            \caption{FSM state encoding generated by the synthesizer for the
            single cycle design.}
            \label{table:singleslacks}
            \centering
            \begin{tabular}{ m{5em}m{10em} }
                \hline
                \textbf{Check}  &   \textbf{Worst Case Slack} \\
                \hline
                SETUP           &   -6.736 ns \\
                HOLD            &   1.003 ns \\
                \hline
            \end{tabular}
        \end{table}

        Table \ref{table:singlemacro} provides the macro statistics generated
        by the synthesizer.

        \begin{figure}[ht]
            \begin{center}
                \includegraphics[width=1\textwidth]{singtime.png}
                \caption{Screen capture of the timing constraint report showing
                failure of \texttt{TS\_uut\_CLK0\_BUF} of the DCM.}
                \label{fig:singtime}
            \end{center}
        \end{figure}


        \begin{table}[h]
            \caption{Macro statistics generated by the synthesizer for the
            single cycle design.}
            \label{table:singlemacro}
            \centering

            \begin{tabular*}{250pt}{ m{20em}m{1cm} }
                \textbf{\# Multipliers}         & \textbf{2} \\
                 11x11-bit multiplier           & 2 \\
                \textbf{\# Adders/Subtractors}  & \textbf{4} \\
                 10-bit adder                   & 1 \\
                 11-bit subtractor              & 2 \\
                 23-bit adder                   & 1 \\
                \textbf{\# Counters}            & \textbf{2} \\
                 10-bit up counter              & 2 \\
                \textbf{\# Registers}           & \textbf{8} \\
                 1-bit register                 & 8 \\
                \textbf{\# Comparators}         & \textbf{1} \\
                 24-bit comparator less         & 1 \\
            \end{tabular*}

        \end{table}

        The multipliers are used to multiply the two 21-bit squared
        coordinates. Several adders and subtractors are used in the design to
        handle \texttt{pos\_v}, \texttt{pos\_h} and the centers coordinates.
        \newpage

        \subsubsection{States} Table \ref{table:singlefsmcode} provides the FSM
        states encoded by the synthesizer. The automatic-encoding encoded
        states do not differ from the values assigned to them during
        initialization because of the small number of states. The states were
        intentionally assigned with 2-bit values to alert the synthesizer of
        the FSM.

        \begin{table}[h]
            \caption{FSM state encoding generated by the synthesizer for the
            single cycle design.}
            \label{table:singlefsmcode}
            \centering
            \begin{tabular}{ m{5em}m{5em} }
                \hline
                \textbf{State}  &            \textbf{Encoding} \\
                \hline
                00              &            00 \\
                01              &            01 \\
                \hline
            \end{tabular}
        \end{table}

        \begin{enumerate}

            \item \textbf{INIT (00): } Serves as a buffer to the computational
            state. This state serves no other purpose.

            \item \textbf{COMPUTE (01): } Computes the entire circle
            inequality.

        \end{enumerate}


\end{document}
